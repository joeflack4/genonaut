{
  "db-host": "localhost",
  "db-port": 5432,
  "db-user-ro": "genonaut_ro",
  "db-user-rw": "genonaut_rw",
  "db-user-admin": "genonaut_admin",
  "db-user-admin-uuid": "121e194b-4caa-4b81-ad4f-86ca3919d5b9",
  "db-user-for-init": "postgres",
  "db-echo": false,
  "api-host": "0.0.0.0",
  "api-port": 8001,
  "api-debug": false,
  "test-api-base-url": "http://0.0.0.0:8099",
  "comfyui-url": "http://localhost:8000",
  "comfyui-output-dir": "~/Documents/ComfyUI/output",
  "comfyui-models-dir": "~/Documents/ComfyUI/models",
  "comfyui-mock-url": "http://localhost:8189",
  "comfyui-mock-output-dir": "test/_infra/mock_services/comfyui/output",
  "comfyui-mock-models-dir": "test/_infra/mock_services/comfyui/models",
  "comfyui-mock-port": 8189,
  "celery-result-backend-template-string": "redis://:${REDIS_PASSWORD}@localhost:6379/2",
  "seed-data": {
    "main": "io/input/init/rdbms",
    "demo": "io/input/init/demo_rdbms",
    "test": "test/db/input/rdbms_init_empty"
  },
  "seed-data-premade": {
    "main": "io/input/init/rdbms",
    "demo": "io/input/init/demo_rdbms",
    "test": "test/db/input/rdbms_init_v1"
  },
  "seed-data-generator": {
    "batch-size": 2000,
    "target-rows-users": 500,
    "target-rows-content-items": 20000,
    "target-rows-content-items-auto": 100000
  },
  "backup-dir": "_archive/backups/db/",
  "storage-dir": "io/storage/",
  "images-dir": "io/storage/images/",
  "_comment_statement-timeout": "PostgreSQL statement_timeout (e.g., 15s, 500ms, 1min) applied to all API connections.",
  "statement-timeout": "15s",
  "_comment_content-query-strategy": "Query execution strategy: 'orm' (slower, uses SQLAlchemy ORM) or 'raw_sql' (faster, ~140x speedup)",
  "content-query-strategy": "raw_sql",
  "performance": {
    "query-planner-tag-prejoin": {
      "_comment": "Configuration for pre-JOIN tag filtering query strategy selection",
      "small-k-threshold": 3,
      "group-having-rarest-ceiling": 50000,
      "two-phase-min-k-for-dual-seed": 7,
      "two-phase-dual-seed-floor": 150000,
      "seed-candidate-cap": 50000,
      "max-work-mem-mb": 256,
      "enable-two-phase": true,
      "enable-group-having": true,
      "enable-self-join": true,
      "stats": {
        "source": "table",
        "table-name": "tag_cardinality_stats",
        "freshness-seconds": 3600,
        "fallback-default-count": 1000000
      },
      "telemetry": {
        "log-strategy-choice": true,
        "log-estimates": true,
        "sample-rate": 0.1
      }
    }
  },
  "cache-planning": {
    "_comment": "Configuration for route analytics cache planning",
    "top-n-routes": 20,
    "pages-to-cache-per-route": 1
  },
  "celery": {
    "_comment": "Celery configuration including Beat scheduler for periodic tasks",
    "beat-schedule": {
      "refresh-tag-stats": {
        "_comment": "Refresh tag cardinality statistics for query planner (runs daily at midnight UTC)",
        "enabled": true,
        "task": "genonaut.worker.tasks.refresh_tag_cardinality_stats",
        "schedule": {
          "hour": 0,
          "minute": 0
        }
      },
      "refresh-gen-source-stats": {
        "_comment": "Refresh gen source statistics for gallery UI (runs hourly)",
        "enabled": true,
        "task": "genonaut.worker.tasks.refresh_gen_source_stats",
        "schedule": {
          "minute": 0
        }
      },
      "transfer-route-analytics": {
        "_comment": "Transfer route analytics from Redis to PostgreSQL (runs every 10 minutes)",
        "enabled": true,
        "task": "genonaut.worker.tasks.transfer_route_analytics_to_postgres",
        "schedule": {
          "minute": "*/10"
        }
      },
      "aggregate-route-analytics": {
        "_comment": "Aggregate hourly route analytics metrics (runs hourly at minute 5)",
        "enabled": true,
        "task": "genonaut.worker.tasks.aggregate_route_analytics_hourly",
        "schedule": {
          "minute": 5,
          "hour": "*"
        }
      },
      "transfer-generation-events": {
        "_comment": "Transfer generation events from Redis to PostgreSQL (runs every 10 minutes)",
        "enabled": true,
        "task": "genonaut.worker.tasks.transfer_generation_events_to_postgres",
        "schedule": {
          "minute": "*/10"
        }
      },
      "aggregate-generation-metrics": {
        "_comment": "Aggregate hourly generation metrics (runs hourly at minute 7)",
        "enabled": true,
        "task": "genonaut.worker.tasks.aggregate_generation_metrics_hourly",
        "schedule": {
          "minute": 7,
          "hour": "*"
        }
      }
    }
  }
}
