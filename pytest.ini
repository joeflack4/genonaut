[pytest]
markers =
    longrunning: marks tests as long-running tests (> 5 seconds, performance/stress tests)
    stress: marks tests as stress tests (may be slow and resource intensive)
    slow: marks tests as slow-running tests
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    api: marks tests as API tests
    db: marks tests as database tests
    db_integration: marks tests as database integration tests
    comfyui_poll: marks tests that poll the mock ComfyUI server and wait for completion delays
    comfyui_e2e: marks ComfyUI end-to-end workflow tests that exercise Celery-style job processing
    api_server: marks tests that boot the API server process and hit live HTTP endpoints
    ontology_perf: marks ontology performance and CLI validation tests that manipulate large datasets or make subprocess calls
    manual: marks tests that are only run manually (not part of automated test suite)
    performance: marks performance tests that require live demo server (run manually only)

# Test discovery patterns
testpaths = test
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Minimum version requirements
minversion = 6.0

# Default options for all test runs
addopts =
    -v
    --tb=short
    --strict-markers
    --disable-warnings

# Coverage configuration
# Uncomment below to enable coverage by default
# --cov=genonaut
# --cov-report=term-missing
# --cov-report=html:htmlcov

# Timeout for slow tests (in seconds)
timeout = 300

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning:pydantic.*
    ignore::pydantic.warnings.PydanticDeprecatedSince20
